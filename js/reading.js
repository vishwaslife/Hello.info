// Full Content Data for Blog Posts
const fullPostContent = {
  1: {
    title: "Clear & Glowing Skin ke liye Daily Routine",
    category: "skincare",
    date: "2024-01-15",
    emoji: "ðŸ§´",
    keyPoints: [
      "Daily skincare routine follow karna zaroori hai",
      "Face wash, moisturizer aur sunscreen basics hain",
      "Morning aur night routine ka role alag hota hai",
      "Consistency se hi results aate hain",
      "Skin type ke according products choose karein"
    ],
    content: `
      <h2>ðŸ§¼ BASICS OF SKIN & DAILY CARE</h2>
      
      <h3>1. The Science of Human Skin</h3>
      <p>Skin body ka sabse bada organ hai jo protection, hydration aur temperature control karta hai. Ye dirt, bacteria aur sun damage se bachata hai. Skin ke layers hoti hain jo repair aur renewal ka kaam karti hain. Isliye skin care overall health ka part hai.</p>
      
      <h3>2. Understanding Your Skin Type</h3>
      <p>Har person ki skin alag hoti haiâ€”oily, dry, normal, combination ya sensitive. Galat skin type ke product use karne se acne, dryness ya irritation hoti hai. Pehle apni skin type samajhna zaroori hai, tabhi skincare effective hoti hai.</p>
      
      <h3>3. Daily Skincare for Beginners</h3>
      <p>Beginners ke liye skincare complicated nahi honi chahiye. Sirf 3 cheez kaafi hoti hainâ€”face wash, moisturizer aur sunscreen. Ye skin ko clean, hydrated aur protected rakhta hai. Simple routine follow karna long-term me best results deta hai.</p>
      
      <h3>4. Morning vs Night Skincare Theory</h3>
      <p>Morning routine ka goal protection hota haiâ€”cleaning aur sunscreen. Night routine ka kaam repair hota haiâ€”moisturizer aur treatment products. Din bhar skin damage hoti hai aur raat me repair hoti hai, isliye dono routines ka role alag hota hai.</p>
      
      <h3>5. How Skin Heals Itself</h3>
      <p>Skin natural healing system rakhti hai jo mostly raat me active hota hai. Proper sleep, hydration aur gentle skincare skin ko repair karne me help karta hai. Isliye late nights aur poor routine se skin problems badh jaati hain.</p>
      
      <h3>6. Skin Barrier Explained Simply</h3>
      <p>Skin barrier ek protective layer hoti hai jo moisture ko andar rakhti hai aur pollution ko bahar. Agar barrier damage ho jaaye to dryness, acne aur sensitivity hoti hai. Gentle products aur moisturizer barrier ko strong banate hain.</p>
      
      <h3>7. Why Consistency Matters</h3>
      <p>Skincare ek din ka kaam nahi hai. Products tabhi kaam karte hain jab unhe roz use kiya jaye. Beech-beech me routine todna results ko delay karta hai. Consistency slow hoti hai, par long-lasting aur safe hoti hai.</p>
      
      <h3>8. Skincare Myths vs Reality</h3>
      <p>Fairness creams instant result nahi deti. Natural glow makeup ya filter se nahi, routine se aata hai. Har mehnga product best nahi hota. Myths follow karne se disappointment hoti hai, isliye science-based skincare zaroori hai.</p>
      
      <h3>9. Natural Glow: Daily Habits</h3>
      <p>Daily pani peena, face clean rakhna, sunscreen lagana aur proper sleep lena glow ke basics hain. Glow sirf product se nahi aata, balki lifestyle se aata hai. Small habits daily follow karne se skin naturally healthy dikhti hai.</p>
      
      <h3>10. Skin Hygiene & Clean Living</h3>
      <p>Dirty hands, phone, pillow cover aur towels skin problems badhate hain. Hygiene follow na karne se bacteria face par transfer hota hai. Clean environment acne aur infection se bachata hai. Clean living ka direct effect skin par padta hai.</p>
      
      <h2>ðŸ§´ PRODUCTS & THEIR USES</h2>
      
      <h3>11. Face Wash: How & When</h3>
      <p>Face wash din me do baar use karna chahiyeâ€”subah aur raat. Ye dirt, oil aur pollution remove karta hai. Over-washing se skin dry ho sakti hai. Mild face wash skin ko clean karta hai bina damage kiye.</p>
      
      <h3>12. Cleanser vs Face Wash</h3>
      <p>Cleanser makeup aur sunscreen ko gently remove karta hai, jabki face wash deep cleaning karta hai. Dono ka role alag hota hai. Heavy sunscreen ya makeup use karte ho to cleanser helpful hota hai, warna normal face wash kaafi hota hai.</p>
      
      <h3>13. Toner: Necessary or Optional</h3>
      <p>Toner pores ko clean karta aur skin ko fresh feel deta hai. Lekin beginners ke liye toner compulsory nahi hota. Agar skin oily ya acne-prone ho, tab toner helpful ho sakta hai. Simple routine me toner skip bhi kar sakte ho.</p>
      
      <h3>14. Moisturizer Importance</h3>
      <p>Moisturizer skin ki hydration lock karta hai. Oily skin ko bhi moisturizer chahiye, bas texture light hona chahiye. Moisturizer ke bina skin dry ho jaati hai aur oil aur zyada produce karti hai, jo acne badhata hai.</p>
      
      <h3>15. Sunscreen: The Daily Shield</h3>
      <p>Sunscreen sun ke harmful UV rays se skin ko protect karta hai. Ye tanning, pigmentation aur early aging se bachata hai. Cloudy day ya indoor bhi sunscreen important hai. Sunscreen daily lagana skincare ka sabse important step hai.</p>
      
      <h3>16. Serum Guide for Beginners</h3>
      <p>Serum lightweight product hota hai jo specific problem target karta hai jaise acne, dark spots ya dullness. Beginners ek hi serum use karein. Overuse ya multiple serums skin ko irritate kar sakte hain, isliye simple approach best hoti hai.</p>
      
      <h3>17. Vitamin C for Skin</h3>
      <p>Vitamin C skin ko bright banata hai aur pigmentation kam karta hai. Ye antioxidant hai jo sun damage se bachata hai. Daily use se skin tone improve hoti hai. Sensitive skin wale low concentration se start karein.</p>
      
      <h3>18. Niacinamide Explained</h3>
      <p>Niacinamide oil control, acne reduction aur pores appearance improve karta hai. Ye beginner-friendly ingredient hai jo mostly sab skin types suit karta hai. Regular use se skin balanced aur calm rehti hai.</p>
      
      <h3>19. Retinol in Simple Words</h3>
      <p>Retinol skin renewal aur acne marks ke liye use hota hai. Ye powerful ingredient hai, isliye slow aur night me use karna chahiye. Galat use se irritation ho sakti hai, isliye beginners dhyan se use karein.</p>
      
      <h3>20. How to Layer Products</h3>
      <p>Hamesha thin se thick products lagao. Pehle cleanser, phir serum, phir moisturizer aur last sunscreen. Galat layering se products ka effect kam ho jaata hai. Proper layering se skin products ko better absorb karti hai.</p>
      
      <blockquote>
        <strong>Remember:</strong> Skincare ek journey hai, destination nahi. Patience aur consistency se hi perfect skin milti hai. Apni skin type samajhkar, simple routine follow karein aur results dekhein.
      </blockquote>
    `
  }
};

// Get post ID from URL
function getPostIdFromURL() {
  const params = new URLSearchParams(window.location.search);
  return parseInt(params.get('id'));
}

// Calculate reading time
function calculateReadingTime(content) {
  const wordsPerMinute = 200;
  const text = content.replace(/<[^>]*>/g, '');
  const wordCount = text.split(/\s+/).length;
  const minutes = Math.ceil(wordCount / wordsPerMinute);
  return `${minutes} min read`;
}

// Load and display post
function loadPost() {
  const postId = getPostIdFromURL();
  const allPosts = window.blogPosts || [];
  
  if (!postId) {
    window.location.href = 'index.html';
    return;
  }
  
  const currentPost = allPosts.find(p => p.id === postId);
  
  if (!currentPost) {
    window.location.href = 'index.html';
    return;
  }
  
  // Check if full content exists, otherwise use basic content
  const hasFullContent = fullPostContent[postId];
  const post = hasFullContent ? fullPostContent[postId] : {
    title: currentPost.title,
    category: currentPost.category,
    date: currentPost.date,
    emoji: currentPost.emoji,
    keyPoints: [
      "Detailed content coming soon",
      "Check back later for full article",
      "More information will be added"
    ],
    content: `
      <p>${currentPost.excerpt}</p>
      <p><strong>Full detailed content for this post is coming soon!</strong></p>
      <p>We're working on adding comprehensive information about this topic. Please check back later for the complete article with detailed insights, tips, and valuable information.</p>
      <blockquote>
        <strong>Note:</strong> This is a preview. The full article with detailed content will be available soon.
      </blockquote>
    `
  };
  
  // Set page title
  document.title = `${post.title} - Hello.Info`;
  
  // Update header
  document.getElementById('postTitle').textContent = post.emoji + ' ' + post.title;
  document.getElementById('categoryBadge').textContent = getCategoryName(post.category);
  document.getElementById('postDateMeta').textContent = formatDate(post.date);
  document.getElementById('postDate').textContent = formatDate(post.date);
  document.getElementById('postCategory').textContent = getCategoryName(post.category);
  
  // Set content
  document.getElementById('postBody').innerHTML = post.content;
  
  // Calculate and set reading time
  const readingTime = calculateReadingTime(post.content);
  document.getElementById('readingTime').textContent = readingTime;
  document.getElementById('readingTimeMeta').textContent = readingTime;
  
  // Set key points
  const keyPointsList = document.getElementById('keyPointsList');
  keyPointsList.innerHTML = post.keyPoints.map(point => 
    `<li>${point}</li>`
  ).join('');
  
  // Setup navigation
  setupNavigation(postId, allPosts);
  
  // Setup related posts
  setupRelatedPosts(postId, post.category, allPosts);
  
  // Setup scroll effects
  setupReadingScrollEffects();
}

// Setup navigation buttons
function setupNavigation(currentId, allPosts) {
  const sortedPosts = [...allPosts].sort((a, b) => new Date(b.date) - new Date(a.date));
  const currentIndex = sortedPosts.findIndex(p => p.id === currentId);
  
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  
  if (currentIndex > 0) {
    const prevPost = sortedPosts[currentIndex - 1];
    prevBtn.onclick = () => window.location.href = `post.html?id=${prevPost.id}`;
  } else {
    prevBtn.disabled = true;
    prevBtn.style.opacity = '0.5';
  }
  
  if (currentIndex < sortedPosts.length - 1) {
    const nextPost = sortedPosts[currentIndex + 1];
    nextBtn.onclick = () => window.location.href = `post.html?id=${nextPost.id}`;
  } else {
    nextBtn.disabled = true;
    nextBtn.style.opacity = '0.5';
  }
}

// Setup related posts
function setupRelatedPosts(currentId, category, allPosts) {
  const related = allPosts
    .filter(p => p.id !== currentId && p.category === category)
    .slice(0, 3);
  
  if (related.length === 0) {
    document.getElementById('relatedPosts').style.display = 'none';
    return;
  }
  
  const relatedGrid = document.getElementById('relatedGrid');
  relatedGrid.innerHTML = related.map(post => `
    <div class="related-card" onclick="window.location.href='post.html?id=${post.id}'">
      <h4>${post.emoji} ${post.title}</h4>
      <p>${post.excerpt}</p>
    </div>
  `).join('');
}

// Setup reading scroll effects
function setupReadingScrollEffects() {
  const article = document.querySelector('.post-article');
  const progressBar = document.getElementById('progressBar');
  
  window.addEventListener('scroll', () => {
    if (!article) return;
    
    const articleTop = article.offsetTop;
    const articleHeight = article.offsetHeight;
    const windowHeight = window.innerHeight;
    const scrollTop = window.scrollY;
    
    const scrolled = ((scrollTop - articleTop + windowHeight) / articleHeight) * 100;
    progressBar.style.width = Math.max(0, Math.min(100, scrolled)) + '%';
    
    // Back to top button
    const topBtn = document.getElementById('topBtn');
    if (scrollTop > 300) {
      topBtn.classList.add('show');
    } else {
      topBtn.classList.remove('show');
    }
  });
  
  // Back to top
  document.getElementById('topBtn').onclick = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };
}

// Theme toggle
function setupThemeToggle() {
  const themeToggle = document.getElementById('themeToggle');
  if (!themeToggle) return;
  
  // Check saved theme
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark');
    themeToggle.textContent = 'â˜€ï¸';
  }
  
  themeToggle.onclick = () => {
    document.body.classList.toggle('dark');
    const isDark = document.body.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
  };
}

// Helper functions (from main.js)
function getCategoryName(category) {
  const names = {
    'skincare': 'ðŸ§´ Skincare',
    'health': 'ðŸ’Š Health',
    'student': 'ðŸŽ“ Student Life',
    'career': 'ðŸ’¼ Career',
    'tech': 'ðŸ’» Technology',
    'money': 'ðŸ’° Money',
    'self-improvement': 'ðŸ§  Self Improvement',
    'general': 'ðŸ“– General Knowledge'
  };
  return names[category] || category;
}

function formatDate(dateString) {
  const date = new Date(dateString);
  return date.toLocaleDateString('en-US', { 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric' 
  });
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', () => {
  loadPost();
  setupThemeToggle();
});
